<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="LWF Loader Document">

  <title>LWF Loader Document</title>

  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.3.0/pure-min.css">
  <link rel="stylesheet" href="css/side-menu.css">
</head>
<body>

<div id="layout">
  <!-- Menu toggle -->
  <a href="#menu" id="menuLink" class="pure-menu-link">
    <!-- Hamburger icon -->
    <span></span>
  </a>

  <div id="menu">
    <div class="pure-menu pure-menu-open">
      <a class="pure-menu-heading" href="http://gree.github.io/lwf-loader/">LWF Loader</a>
      <a href="https://github.com/gree/lwf-loader" style="margin-left: 0; margin-bottom: 10px;">Github Link</a>
      <ul>
        <li class="pure-menu-selected menu-item-strong">

        </li>

        <li class="pure-menu-selected menu-item-divided">
          <a href="#_global_">Objects</a>
        </li>

        <li class="pure-menu menu-item-text">
          <a href="#isAndroid">isAndroid</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#isChrome">isChrome</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#isiOS">isiOS</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#isPreventDefaultEnabled">isPreventDefaultEnabled</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#isSP">isSP</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#isTouchEventEnabled">isTouchEventEnabled</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#userAgent">userAgent</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#useWebWorker">useWebWorker</a>
        </li>

        <li class="pure-menu-selected menu-item-divided" style="margin-top: 5%;">
          <a href="#LwfLoader">LwfLoader</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#addInitializeHook">addInitializeHook</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#getCurrentFPS">getCurrentFPS</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#getImageMapper">getImageMapper_</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#getLwfMapper">getLwfMapper_</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#getLwfPath">getLwfPath_</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#getRenderer">getRenderer</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#isLwfsEnvironment">isLwfsEnvironment_</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#loadLWF">loadLWF</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#loadLWFs">loafLWFs</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#pause">pause</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#playLWF">playLWF</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#requestLWF">requestLWF</a>
        </li>

        <li class="pure-menu menu-item-text">
          <a href="#resume">resume</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#setDisplaySetting">setDisplaySetting</a>
        </li>
        <li class="pure-menu menu-item-text">
          <a href="#setRenderer">setRenderer</a>
        </li>
      </ul>
      <br><br>
    </div>
  </div>

  <div id="main">
    <div class="header">
      <h1>LWF Loader</h1>
      <h2>Loads LWF in a simple and elegant way.</h2>
    </div>

    <div class="content">
      <h2 id="_global_" class="content-subhead">_global_ Objects<a href="#_global_" class="content-link"></a></h2>
      <h3 id="isAndroid" style="margin-top: 5%;">isAndroid</h3>
      <p>
        Flag tells whether currently running on Android devices.
      </p>
      <blockquote class="content-code">
        if (isAndroid)<br>
        => true when running on Android devices, false otherwise.
      </blockquote>
      <br>
      <h3 id="isChrome">isChrome</h3>
      <p>
        Flag tells whether currently running on Google Chrome.
      </p>
      <blockquote class="content-code">
        if (isChrome)<br>
        => true when running on Chrome, false otherwise.
      </blockquote>
      <br>
      <h3 id="isiOS">isiOS</h3>
      <p>
        Flag tells whether currently running on iOS devices.
      </p>
      <blockquote class="content-code">
        if (isiOS)<br>
        => true when running on iOS devices, false otherwise.
      </blockquote>
      <br>
      <h3 id="isPreventDefaultEnabled">isPreventDefaultEnabled</h3>
      <p>
        Flag tells whether preventDefault will be triggered on browser events.
      </p>
      <blockquote class="content-code">
        isPreventDefaultEnabled = true;<br>
        => Turn this flag on to modify behaviour of touch, press and move events.
      </blockquote>
      <br>
      <h3 id="isSP">isSP</h3>
      <p>
        Flag tells whether currently running on SmartPhone devices.
      </p>
      <blockquote class="content-code">
        if (isSP)<br>
        => true when running on Android or iOS devices, false otherwise.
      </blockquote>
      <br>
      <h3 id="isTouchEventEnabled">isTouchEventEnabled</h3>
      <p>
        Flag tells if the touch event is enabled.
      </p>
      <blockquote class="content-code">
        var isTouchEventEnabled = isSP;<br>
        => by default this flag is set to be the same as isSP.
      </blockquote>
      <br>
      <h3  id="userAgent">userAgent</h3>
      <p>
        Copy of the current running user agent.
      </p>
      <blockquote class="content-code">
        var userAgent = navigator.userAgent;
      </blockquote>
      <br>
      <h3 id="useWebWorker">useWebWorker</h3>
      <p>
        Flag tells whether enable Web Workers.
      </p>
      <blockquote class="content-code">
        var useWebWorker = !isAndroid || isChrome;<br>
        => Turn off Web Worker on Android native browser, allow it runs on Android Chrome.
      </blockquote>
      <br>
      <hr>
      <h2 id="LwfLoader" class="content-subhead">Lwf Loader<a href="#LwfLoader" class="content-link"></a></h2>
      <h3 id="addInitializeHook" style="margin-top: 5%;">addInitializeHook
        <code class="simple" style="margin-left: 5%;">addInitializeHook(hookFunc)</code></h3>
      <p>
        Add hook functions that will be bound to corresponding functions before LWF is played.
      </p>

      <blockquote class="content-code">
        var paramHandler = function() { <br>
        &nbsp;&nbsp;return { <br>
        &nbsp;&nbsp;&nbsp;&nbsp;handler: { <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loadError: function(e) { console,log(e); }, <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exception: function(e) { console,log(e); } <br>
        &nbsp;&nbsp;&nbsp;&nbsp;} <br>
        &nbsp;&nbsp;};<br>
        };<br>
        <br>
        var paramCallback = function() { <br>
        &nbsp;&nbsp;return { <br>
        &nbsp;&nbsp;&nbsp;&nbsp;callback: { <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onLoad: function(lwf) { console,log(lwf); } <br>
        &nbsp;&nbsp;&nbsp;&nbsp;} <br>
        &nbsp;&nbsp;};<br>
        };<br>
        <br>
        lwfLoader.addInitializeHook(paramHandler);<br>
        lwfLoader.addInitializeHook(paramCallback);<br>
        <br>
        //Self-defined hook functions will be bound<br>
        //Supports handler for exception and loadError, callback on onLoad function
      </blockquote>
      <br>

      <h3 id="getCurrentFPS" style="margin-top: 5%;">getCurrentFPS
        <code class="simple" style="margin-left: 5%;">getCurrentFPS()</code></h3>
      <p>
        Return current FPS.
      </p>
      <blockquote class="content-code">
        lwfLoader.getCurrentFPS();<br>
        => 60 <br>
      </blockquote>
      <br>

      <h3 id="getImageMapper" style="margin-top: 5%;">getImageMapper_
        <code class="simple" style="margin-left: 5%;">getImageMapper_(imageMap)</code></h3>
      <p>
        Generates function that takes image name as an input and returns the path corresponding to it.
        If input is a function, return directly. Otherwise, it tries to set path from the previous set imageMap array.
        This parameter will be passed into LWF directly.
      </p>

      <blockquote class="content-code">
        var imageMapper = lwfLoader.getImageMapper(imageMap);<br>
        => function imageMapper(image) returns corresponding path for its input image <br>
      </blockquote>
      <br>

      <h3 id="getLwfMapper" style="margin-top: 5%;">getLwfMapper_
        <code class="simple" style="margin-left: 5%;">getLwfMapper_(lwfMap)</code></h3>
      <p>
        Generates function that takes LWF resource name as an input and returns the path corresponding to it based on previously defined lwfMap array.
        If lwfMap is not defined, this function will call <b>getLwfPath_</b> function directly.
        If input is a function, return directly. Otherwise, it tries to set path from the previous set lwfMap array.
        This function is used to generate path retriever gets the correct LWF path name in a flexible way.
      </p>

      <blockquote class="content-code">
        var imageMapper = lwfLoader.getImageMapper(imageMap);<br>
        => function imageMapper(image) returns corresponding path for its input image <br>
      </blockquote>
      <br>

      <h3 id="getLwfPath" style="margin-top: 5%;">getLwfPath_
        <code class="simple" style="margin-left: 5%;">getLwfPath_(lwfId)</code></h3>
      <p>
        Get LWF Path from input ID<br>
        This function is <b>OBSOLETED</b> and it should be used for only backward compatibility purpose only.
      </p>

      <blockquote class="content-code">
        var lwfId = 'lwf_example';<br>
        var lwfPath = lwfLoader.getLwfPath_(lwfId);<br>
        => './lwf_example.lwf'<br>
      </blockquote>
      <br>

      <h3 id="getRenderer" style="margin-top: 5%;">getRenderer
        <code class="simple" style="margin-left: 5%;">getRenderer()</code></h3>
      <p>
        Return the current renderer name in string, null if undefined.<br>
      </p>

      <blockquote class="content-code">
        lwfLoader.getRenderer();<br>
        => 'useCanvasRenderer' //when using canvas renderer<br>
      </blockquote>
      <br>

      <h3 id="isLwfsEnvironment" style="margin-top: 5%;">isLwfsEnvironment_
        <code class="simple" style="margin-left: 5%;">isLwfsEnvironment_()</code></h3>
      <p>
        Check if currently running under LWFS environment.<br>
        When <code>window['testlwf_settings']</code> is defined, it assumes resource is loaded on LWFS environment.
      </p>

      <blockquote class="content-code">
        lwfLoader.isLwfsEnvironment();<br>
        => true //when running on LWFS environment<br>
      </blockquote>
      <br>

      <h3 id="loadLWF" style="margin-top: 5%;">loadLWF
        <code class="simple" style="margin-left: 5%;">loadLWF(lwf, lwfId, imageMap, privateData, callbackFunc)</code></h3>
      <p>
        Load external LWF resource to attach on current running LWF.<br>
      </p>

      <blockquote class="content-code">
        lwfLoader.loadLWF(lwf, lwfId, imageMap, privateData, callbackFunc);<br>
        //Used to load LWF resources to attach on existing instance.<br>
      </blockquote>
      <br>

      <h3 id="loadLWFs" style="margin-top: 5%;">loadLWFs
        <code class="simple" style="margin-left: 5%;">loadLWFs(callbackFunc)</code></h3>
      <p>
        Call LWF's loadLWFs function via loader.<br>
      </p>

      <blockquote class="content-code">
        lwfLoader.loadLWFs(callbackFunc);<br>
        //same as calling LWF.loadLWFs, not frequently used in loader<br>
        //should be used mainly for compatibility issue<br>
      </blockquote>
      <br>

      <h3 id="pause" style="margin-top: 5%;">pause
        <code class="simple" style="margin-left: 5%;">pause()</code></h3>
      <p>
        Stop playing LWF.<br>
      </p>

      <blockquote class="content-code">
        lwfLoader.pause();<br>
        //pause the animation<br>
      </blockquote>
      <br>

      <h3 id="playLWF" style="margin-top: 5%;">playLWF
        <code class="simple" style="margin-left: 5%;">playLWF(lwfDOMElement, lwfSetting)</code></h3>
      <p>
        Load and play LWF using given parameters. <b>playLWF</b> will set necessary parameters to play LWF animation.
        It retrieves parameters from user defined field and sets the default value when no data are given.
        This function is used to load and play parent LWF which all LWF attached to this LWF should be using the same loader settings.
        Thus the loader settings are saved for the further loading purpose.
        <br>
      </p>

      <blockquote class="content-code">
        var targetElem = document.getElementById('lwf-DOM');<br>
        <br>
        var lwfSetting = {<br>
        &nbsp;&nbsp;lwf: "./example.lwf",<br>
        &nbsp;&nbsp;prefix: "./lwf/",<br>
        &nbsp;&nbsp;imagePrefix: "./lwf/",<br>
        &nbsp;&nbsp;privateData: {<br>
        &nbsp;&nbsp;&nbsp;&nbsp;limitTimeSeconds:360<br>
        &nbsp;&nbsp;}<br>
        };<br>
        <br>
        lwfLoader.playLWF(targetElem, lwfSetting);<br>
        //play LWF animation<br>
        //passes parameter stored in <b>lwfParam</b> to LWF<br>
      </blockquote>
      <p>parameters can be set in lwfSetting field are:</p>
      <pre>
        <code>
<b>lwf:"testlwf.lwf"</b>,                        <b>mandatory</b>: URL of lwf binary data or lwf.js<br>
<b>onload:onloadFunction</b>,                    function on load the all data and bitmaps<br>
<b>stage:stage</b>,                              div or canvas<br>
<b>js:"testlwf_debug.js"</b>,                    set JavaScript file instead of automatically set<br>
<b>useBackgroundColor:true</b>,                  fill the stage with the background color of lwf data<br>
<b>setBackgroundColor:0xfff</b>,                 fill the stage with the specified color(ARGB integer)<br>
<b>fitForHeight:true</b>,                        fit lwf size for the height<br>
<b>fitForWidth:true</b>,                         fit lwf size for the width<br>
<b>prefix:""</b>,                                set the prefix of any url<br>
<b>imageMap:imageMap</b>,                        name map or renaming function for images<br>
<b>imagePrefix:""</b>,                           the prefix is (imagePrefix || prefix || "")<br>
<b>imageSuffix:"@2x"</b>,                        suffix of image, default is empty<br>
<b>use3D:true</b>,                               Use 3D transform in CSS (default is true)<br>
<b>onprogress:function(loadedCount,total){}</b>, onprogress function<br>
<b>worker:false</b>,                             Use Web Workers or not, default is true<br>
<b>name:name</b>,                                out: LWF name (string)<br>
<b>error:[{"url":url, "reason":reason}]</b>,     out: filled information about error if error occurred<br>
<b>loadedCount:loadedCount</b>,                  out: loaded count<br>
<b>total:total</b>,                              out: total count
        </code>
      </pre>

      <br>

      <h3 id="resume" style="margin-top: 5%;">resume
        <code class="simple" style="margin-left: 5%;">resume()</code></h3>
      <p>
        Resume playing LWF from pause state.<br>
      </p>

      <blockquote class="content-code">
        lwfLoader.resume();<br>
        //Resume from pause state.<br>
      </blockquote>
      <br>

      <h3 id="setDisplaySetting" style="margin-top: 5%;">setDisplaySetting
        <code class="simple" style="margin-left: 5%;">setDisplaySetting(displaySetting)</code></h3>
      <p>
        Sets the LwfLoader display setting from input parameters.<br>
      </p>

      <blockquote class="content-code">
        var displaySetting = {<br>
        &nbsp;&nbsp;resizeMode: "fitForWidth",<br>
        &nbsp;&nbsp;resizeStretch: true,<br>
        &nbsp;&nbsp;displayDivId: 'stg',<br>
        &nbsp;&nbsp;widthLimit: 640,<br>
        &nbsp;&nbsp;heightLimit: 480<br>
        };<br>
        <br>
        lwfLoader.setDisplaySetting(displaySetting);<br>
        //Play LWF with given display settings.<br>
      </blockquote>
      <p>Available settings are: </p>
      <pre>
        <code>
<b>renderer:'canvas'</b>,          rendering mode(canvas, css, webgl)<br>
<b>resizeMode:'fitForWidth'</b>,   behaviour on window resize, 'fitForWidth' or 'fitForHeight'<br>
<b>resizeStretch:false</b>,        boolean tells whether stretches LWF to fit window size<br>
<b>displayDivId:'lwf-stage'</b>,   ID of DOM element which contains LWF resource, used for stretch purpose<br>
<b>widthLimit:640</b>,             width limit applied to LWF element<br>
<b>widthHeight:480</b>,            height limit applied to LWF element
        </code>
      </pre>
      <br>

      <h3 id="setRenderer" style="margin-top: 5%;">setRenderer
        <code class="simple" style="margin-left: 5%;">setRenderer(renderer)</code></h3>
      <p>
        Set loader's rendering mode to given renderer.<br>
      </p>

      <blockquote class="content-code">
        var myRenderer = 'webkitcss';<br>
        lwfLoader.setRenderer(myRenderer);<br>
        lwfLoader.getRenderer();<br>
        => 'useWebkitCSSRenderer' //set to use CSS renderer<br>
      </blockquote>
      <p>Available renderers are: </p>
      <pre style="width: 350px;">
        <code>
<b>canvas</b>  //short form for Canvas Renderer<br>
<b>webkitcss</b>  //short form for CSS Renderer<br>
<b>webgl</b>  //short form for WebGL Renderer<br>
<b>useCanvasRenderer</b><br>
<b>useWebkitCSSRenderer</b><br>
<b>useWebGLRenderer</b>
        </code>
      </pre>
      <br>
    </div>
  </div>
</div>
<script src="js/ui.js"></script>
</body>
</html>
